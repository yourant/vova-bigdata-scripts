---
config:
  failure.emails: qwang@i9i8.com
  retries: 2
  retry.backoff: 300000

nodes:
  - name: country_order_rpt_start
    type: noop

  - name: judge_dwd_fd_order_info
    type: command
    config:
      command: sh /mnt/vova-bigdata-scripts/common/judge_check.sh dwd_fd_order_info
    dependsOn:
      - country_order_rpt_start
  
  - name: judge_fd_snowplow_hour_flow_end
    type: command
    config:
      command: sh /mnt/vova-bigdata-scripts/common/judge_check.sh fd_snowplow_hour_flow_end
    dependsOn:
      - country_order_rpt_start
  
  - name: judge_ods_fd_vb_newsletters
    type: command
    config:
      command: sh /mnt/vova-bigdata-scripts/common/judge_check.sh ods_fd_vb_newsletters
    dependsOn:
      - country_order_rpt_start
  
  - name: judge_ods_fd_vb_email_unsubscribe
    type: command
    config:
      command: sh /mnt/vova-bigdata-scripts/common/judge_check.sh ods_fd_vb_email_unsubscribe
    dependsOn:
      - country_order_rpt_start
  
  - name: judge_dwd_fd_order_goods
    type: command
    config:
      command: sh /mnt/vova-bigdata-scripts/common/judge_check.sh dwd_fd_order_goods
    dependsOn:
      - country_order_rpt_start
  
  - name: judge_ods_fd_ar_order_analytics
    type: command
    config:
      command: sh /mnt/vova-bigdata-scripts/common/judge_check.sh ods_fd_ar_order_analytics
    dependsOn:
      - country_order_rpt_start

  - name: country_order_rpt_caculate
    type: command
    config:
      command: sh /mnt/vova-bigdata-scripts/fd/dwb/dwb_fd_country_order_rpt/run.sh ${pt}
    dependsOn:
      - judge_dwd_fd_order_info
  
  - name: order_coupon_rpt_caculate
    type: command
    config:
      command: sh /mnt/vova-bigdata-scripts/fd/dwb/dwb_fd_order_coupon_rpt/run.sh ${pt}
    dependsOn:
      - judge_dwd_fd_order_info
  
  - name: newsletter_send_report_caculate
    type: command
    config:
      command: sh /mnt/vova-bigdata-scripts/fd/dwb/dwb_fd_newsletter_rpt/send_run.sh ${pt}
    dependsOn:
      - judge_ods_fd_vb_newsletters
      - judge_ods_fd_vb_email_unsubscribe
  
  - name: newsletter_order_report_caculate
    type: command
    config:
      command: sh /mnt/vova-bigdata-scripts/fd/dwb/dwb_fd_newsletter_rpt/order_run.sh ${pt}
    dependsOn:
      - judge_dwd_fd_order_goods
      - judge_ods_fd_ar_order_analytics
  
  - name: newsletter_order_sp_report_caculate
    type: command
    config:
      command: sh /mnt/vova-bigdata-scripts/fd/dwb/dwb_fd_newsletter_rpt/sp_run.sh ${pt}
    dependsOn:
      - judge_dwd_fd_order_goods
      - judge_ods_fd_ar_order_analytics
      - judge_fd_snowplow_hour_flow_end

  - name: country_order_rpt_end
    type: noop
    dependsOn:
      - country_order_rpt_caculate
      - order_coupon_rpt_caculate
      - newsletter_send_report_caculate
      - newsletter_order_report_caculate
      - newsletter_order_sp_report_caculate