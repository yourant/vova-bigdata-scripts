---
config:
  failure.emails: yzhang13@vova.com.hk,dyshu@vova.com.hk,kaicheng@vova.com.hk
  retries: 5
  retry.backoff: 600000


nodes:
  - name: end_flag
    type: command
    config:
      command: echo "stop job"
    dependsOn:
      - sqoop_mlb_vova_rec_m_nbi_nb_d
      - sqoop_mlb_vova_goods_second_cat
      - sqoop_mlb_rec_m_catlike_d
      - sqoop_mlb_vova_rec_m_user_cat_expand_d

  - name: start_flag
    type: command
    config:
      command: echo "start job"

##judge#############
  - name: judge_mlb_vova_rec_m_nbi_nb_d
    type: command
    config:
      command: sh /mnt/vova-bigdata-scripts/common/judge_check.sh mlb_vova_rec_m_nbi_nb_d
    dependsOn:
      - start_flag

  - name: judge_mlb_vova_buyer_activate_time
    type: command
    config:
      command: sh /mnt/vova-bigdata-scripts/common/judge_check.sh mlb_vova_buyer_activate_time
    dependsOn:
      - start_flag

  - name: judge_mlb_vova_new_user_rec
    type: command
    config:
      command: sh /mnt/vova-bigdata-scripts/common/judge_check.sh mlb_vova_new_user_rec
      retries: 20
      retry.backoff: 900000
    dependsOn:
      - start_flag

#  - name: judge_mlb_vova_new_user_reg_rec_out_data
#    type: command
#    config:
#      command: sh /mnt/vova-bigdata-scripts/common/judge_check.sh mlb_vova_new_user_reg_rec_out_data
#      retries: 20
#      retry.backoff: 1200000
#    dependsOn:
#      - start_flag

  - name: judge_mlb_vova_goods_second_cat
    type: command
    config:
      command: sh /mnt/vova-bigdata-scripts/common/judge_check.sh mlb_vova_goods_second_cat
      retries: 20
      retry.backoff: 1200000
    dependsOn:
      - start_flag


########################
  - name: sqoop_mlb_vova_rec_m_nbi_nb_d
    type: command
    config:
      command: sh /mnt/vova-bigdata-scripts/vova/mlb/rec_m_nbi_nb_d/sqoop_export.sh
      retries: 5
      retry.backoff: 600000
    dependsOn:
      - judge_mlb_vova_rec_m_nbi_nb_d

  - name: sqoop_mlb_vova_buyer_activate_time
    type: command
    config:
      command: sh /mnt/vova-bigdata-scripts/vova/mlb/buyer_activate_time/sqoop_export.sh
      retries: 5
      retry.backoff: 600000
    dependsOn:
      - judge_mlb_vova_buyer_activate_time

# [7381]基于用户属性的新用户冷启动策略
  - name: sqoop_mlb_vova_rec_m_nurecall_d
    type: command
    config:
      command: sh /mnt/vova-bigdata-scripts/vova/mlb/new_user_rec/sqoop_export.sh
      retries: 5
      retry.backoff: 600000
    dependsOn:
      - judge_mlb_vova_new_user_rec

  - name: sqoop_mlb_vova_rec_m_nurecall_nb_d
    type: command
    config:
      command: sh /mnt/vova-bigdata-scripts/vova/mlb/new_user_rec/sqoop_export_nb.sh
      retries: 5
      retry.backoff: 600000
    dependsOn:
      - judge_mlb_vova_new_user_rec

# [7832]冷启动兜底策略
#  - name: sqoop_mlb_vova_rec_m_nurecallad_d_sqoop_export
#    type: command
#    config:
#      command: sh /mnt/vova-bigdata-scripts/vova/mlb/new_user_reg_rec/nurecallad_d_sqoop_export.sh
#      retries: 5
#      retry.backoff: 600000
#    dependsOn:
#      - judge_mlb_vova_new_user_reg_rec_out_data
#
#  - name: sqoop_mlb_vova_rec_m_nurecallad_nb_d_sqoop_export
#    type: command
#    config:
#      command: sh /mnt/vova-bigdata-scripts/vova/mlb/new_user_reg_rec/nurecallad_nb_d_sqoop_export.sh
#      retries: 5
#      retry.backoff: 600000
#    dependsOn:
#      - judge_mlb_vova_new_user_reg_rec_out_data
#
#  - name: sqoop_mlb_vova_rec_m_nurecallreg_d_sqoop_export
#    type: command
#    config:
#      command: sh /mnt/vova-bigdata-scripts/vova/mlb/new_user_reg_rec/nurecallreg_d_sqoop_export.sh
#      retries: 5
#      retry.backoff: 600000
#    dependsOn:
#      - judge_mlb_vova_new_user_reg_rec_out_data
#
#  - name: sqoop_mlb_vova_rec_m_nurecallreg_nb_d_sqoop_export
#    type: command
#    config:
#      command: sh /mnt/vova-bigdata-scripts/vova/mlb/new_user_reg_rec/nurecallreg_nb_d_sqoop_export.sh
#      retries: 5
#      retry.backoff: 600000
#    dependsOn:
#      - judge_mlb_vova_new_user_reg_rec_out_data

# [8721]首页上线新激活用户兴趣探测策略
  - name: sqoop_mlb_vova_goods_second_cat
    type: command
    config:
      command: sh /mnt/vova-bigdata-scripts/vova/mlb/goods_cat/sqoop_export.sh
      retries: 5
      retry.backoff: 600000
    dependsOn:
      - judge_mlb_vova_goods_second_cat

# [8523]Tik Tok渠道用户推荐优化 a recall_poll
  - name: judge_ads_vova_channel_region_top
    type: command
    config:
      command: sh /mnt/vova-bigdata-scripts/common/judge_check.sh ads_vova_channel_region_top
      retries: 10
      retry.backoff: 300000
    dependsOn:
      - start_flag

  - name: sqoop_ads_vova_channel_region_top
    type: command
    config:
      command: sh /mnt/vova-bigdata-scripts/vova/ads/buyer_channel_optimize/sqoop_export_channel_region_top.sh
      retries: 5
      retry.backoff: 600000
    dependsOn:
      - judge_ads_vova_channel_region_top

# [8523]Tik Tok渠道用户推荐优化 b  recall_poll
  - name: judge_ads_vova_age_range_top
    type: command
    config:
      command: sh /mnt/vova-bigdata-scripts/common/judge_check.sh ads_vova_age_range_top
      retries: 10
      retry.backoff: 300000
    dependsOn:
      - start_flag

  - name: sqoop_ads_vova_age_range_top
    type: command
    config:
      command: sh /mnt/vova-bigdata-scripts/vova/ads/buyer_channel_optimize/sqoop_export_age_range_top.sh
      retries: 5
      retry.backoff: 600000
    dependsOn:
      - judge_ads_vova_age_range_top

# [9166]首页新增用户类目偏好发现召回-导数 3 张表 heliu
## mlb_rec_m_catlike_d
  - name: judge_mlb_rec_m_catlike_d
    type: command
    config:
      command: sh /mnt/vova-bigdata-scripts/common/judge_check.sh mlb_rec_m_catlike_d
      retries: 10
      retry.backoff: 300000
    dependsOn:
      - start_flag

  - name: sqoop_mlb_rec_m_catlike_d
    type: command
    config:
      command: sh /mnt/vova-bigdata-scripts/vova/mlb/rec_b_cat_tag_like_d/sqoop_rec_m_catlike_d.sh
      retries: 20
      retry.backoff: 1800000
    dependsOn:
      - start_flag
      - judge_mlb_rec_m_catlike_d

## mlb_rec_m_tagcombine_d
  - name: judge_mlb_rec_m_tagcombine_d
    type: command
    config:
      command: sh /mnt/vova-bigdata-scripts/common/judge_check.sh mlb_rec_m_tagcombine_d
      retries: 10
      retry.backoff: 300000
    dependsOn:
      - start_flag

  - name: sqoop_mlb_rec_m_tagcombine_d
    type: command
    config:
      command: sh /mnt/vova-bigdata-scripts/vova/mlb/rec_b_cat_tag_like_d/sqoop_rec_m_tagcombine_d.sh
      retries: 20
      retry.backoff: 1800000
    dependsOn:
      - start_flag
      - judge_mlb_rec_m_tagcombine_d

## mlb_rec_m_taglike_d
  - name: judge_mlb_rec_m_taglike_d
    type: command
    config:
      command: sh /mnt/vova-bigdata-scripts/common/judge_check.sh mlb_rec_m_taglike_d
      retries: 10
      retry.backoff: 300000
    dependsOn:
      - start_flag

  - name: sqoop_mlb_rec_m_taglike_d
    type: command
    config:
      command: sh /mnt/vova-bigdata-scripts/vova/mlb/rec_b_cat_tag_like_d/sqoop_rec_m_taglike_d.sh
      retries: 20
      retry.backoff: 1800000
    dependsOn:
      - start_flag
      - judge_mlb_rec_m_taglike_d

## mlb_rec_m_hotcatlike_d
  - name: judge_mlb_rec_m_hotcatlike_d
    type: command
    config:
      command: sh /mnt/vova-bigdata-scripts/common/judge_check.sh mlb_rec_m_hotcatlike_d
      retries: 10
      retry.backoff: 300000
    dependsOn:
      - start_flag

  - name: sqoop_mlb_rec_m_hotcatlike_d
    type: command
    config:
      command: sh /mnt/vova-bigdata-scripts/vova/mlb/rec_b_cat_tag_like_d/sqoop_rec_m_hotcatlike_d.sh
      retries: 20
      retry.backoff: 1800000
    dependsOn:
      - start_flag
      - judge_mlb_rec_m_hotcatlike_d

# [9149]列表页增加用户行为实时反馈&用户属性类目偏好-导数 2 张表 gongrui
  - name: judge_mlb_vova_rec_m_user_cat_expand_d
    type: command
    config:
      command: sh /mnt/vova-bigdata-scripts/common/judge_check.sh mlb_vova_rec_m_user_cat_expand_d
      retries: 10
      retry.backoff: 300000
    dependsOn:
      - start_flag

  - name: sqoop_mlb_vova_rec_m_user_cat_expand_d
    type: command
    config:
      command: sh /mnt/vova-bigdata-scripts/vova/mlb/rec_m_user_kg_tag_d/sqoop_rec_m_user_cat_expand_d.sh
      retries: 20
      retry.backoff: 1800000
    dependsOn:
      - start_flag
      - judge_mlb_vova_rec_m_user_cat_expand_d



